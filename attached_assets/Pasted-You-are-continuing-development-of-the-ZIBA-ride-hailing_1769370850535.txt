You are continuing development of the ZIBA ride-hailing app.
Phases 10A (Refunds), 10B (Chargebacks & Reconciliation), and 11 (Wallets & Payouts)
are COMPLETE and MUST NOT be modified.

IMPLEMENT PHASE 12 â€” ADMIN FINANCIAL ANALYTICS & REPORTS.

DO NOT BREAK EXISTING FEATURES.
EXTEND ONLY.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
OBJECTIVES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1) Provide real-time financial visibility for Admin & Finance
2) Aggregate trips, revenue, commissions, payouts, refunds, and chargebacks
3) Enable exportable financial reports
4) Support daily, weekly, monthly financial views
5) Prepare system for audit, tax, and investor reporting

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ROLES & ACCESS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ADMIN
FINANCE

â€¢ ADMIN: Full analytics + exports
â€¢ FINANCE: Financial analytics + exports
â€¢ All other roles: NO access

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ANALYTICS METRICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Compute and expose:

TRIPS
- Total trips
- Completed vs cancelled
- Trips per day/week/month

REVENUE
- Gross fares
- ZIBA commission
- Driver earnings
- Net platform revenue

REFUNDS & CHARGEBACKS
- Total refunds issued
- Total chargebacks (won / lost)
- Financial loss exposure

WALLETS & PAYOUTS
- Total driver balances
- Locked vs available balances
- Payouts processed
- Payouts pending / failed

VARIANCE & RECONCILIATION
- Mismatched payments
- Manual reviews count
- Resolved vs unresolved items

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DATABASE / QUERIES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DO NOT add new core tables unless absolutely required.

Use:
- Trip
- Wallet
- WalletTransaction
- Refund
- Chargeback
- Payout
- PaymentReconciliation

Create optimized aggregation queries.
Ensure queries scale and are indexed.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
API ROUTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

GET /api/analytics/overview
GET /api/analytics/trips?range=
GET /api/analytics/revenue?range=
GET /api/analytics/refunds?range=
GET /api/analytics/payouts?range=
GET /api/analytics/reconciliation?range=

GET /api/reports/export?type=&range=&format=csv|pdf

Strict RBAC enforcement.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
UI (ADMIN DASHBOARD)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Add a new Admin tab:

ðŸ“Š Reports

Sections:
1) Financial Overview Cards
2) Time-range selector (Today / 7d / 30d / Custom)
3) Charts:
   - Revenue over time
   - Payouts vs earnings
   - Refunds & chargebacks
4) Tables:
   - Detailed financial rows
5) Export buttons:
   - CSV
   - PDF

UI must remain lightweight and fast.
NO client-side heavy calculations.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EXPORT RULES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ CSV for spreadsheets & accounting
â€¢ PDF for audits & compliance
â€¢ Exports must reflect selected date range
â€¢ No data mutation during export

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AUDIT & SAFETY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ All analytics are READ-ONLY
â€¢ No hidden calculations
â€¢ No data manipulation
â€¢ All figures traceable to source records

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FINAL CHECKS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ Analytics load without blocking UI
â€¢ Existing dashboards still function
â€¢ No wallet, payout, or refund logic altered
â€¢ App compiles cleanly

IMPLEMENT PHASE 12 ONLY.
