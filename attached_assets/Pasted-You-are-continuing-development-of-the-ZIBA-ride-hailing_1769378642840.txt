You are continuing development of the ZIBA ride-hailing app.
Phases 1â€“18 are COMPLETE and MUST NOT be modified.

IMPLEMENT PHASE 19 â€” GROWTH, MARKETING & PARTNERSHIPS.

This phase introduces growth tooling, referrals, and partnership readiness
without altering pricing, payouts, or contracts.

DO NOT BREAK EXISTING FEATURES.
EXTEND ONLY.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
OBJECTIVES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1) Enable user growth via referrals
2) Track acquisition channels
3) Support promo campaigns (non-monetary & simulated)
4) Prepare partnership onboarding (read-only)
5) Provide growth analytics for Admin

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CORE PRINCIPLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ NO automatic discounts affecting wallets
â€¢ NO changes to pricing or commission
â€¢ Rewards are simulated or ledger-based (no cash impact)
â€¢ Analytics-first approach

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DATABASE (Prisma)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Add the following models:

ReferralCode
- id
- code
- ownerUserId
- ownerRole (RIDER | DRIVER | TRIP_COORDINATOR)
- usageCount
- maxUsage (nullable)
- active
- createdAt

ReferralEvent
- id
- referralCodeId
- newUserId
- newUserRole
- source (APP | WEB | PARTNER)
- createdAt

MarketingCampaign
- id
- name
- type (REFERRAL | PROMO | PARTNERSHIP)
- startAt
- endAt
- status (ACTIVE | PAUSED | ENDED)
- notes
- createdAt

PartnerLead
- id
- organizationName
- contactName
- contactEmail
- partnerType (NGO | HOSPITAL | CHURCH | SCHOOL | GOV | CORPORATE)
- status (NEW | CONTACTED | IN_DISCUSSION | SIGNED | LOST)
- createdAt

Ensure indexes on ownerUserId, code, status.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SYSTEM BEHAVIOR
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1) Referrals
- Users can generate referral codes
- Codes can be shared externally
- Track signups via referral
- Display referral stats (no cash rewards yet)

2) Campaign Tracking
- Link referrals to campaigns
- Measure performance by time range
- No automatic discounts or payouts

3) Partnership Intake
- Admin can log partner leads
- Track lifecycle from lead to signed
- No contract creation here (Phase 18 already handles that)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
API ROUTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

POST /api/referrals/create
GET  /api/referrals/my
GET  /api/referrals/stats

POST /api/campaigns/create
GET  /api/campaigns/active

POST /api/partners/lead
GET  /api/partners/leads

Strict RBAC:
- Users manage own referrals
- Admin manages campaigns & partners

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
UI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

USER DASHBOARD:
ðŸŽ¯ Referrals
- Referral code
- Share button
- Usage stats

ADMIN DASHBOARD:
ðŸ“ˆ Growth
- Campaign performance
- Referral conversion metrics
- Partner leads pipeline

NO changes to rider/driver booking flow.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ANALYTICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Extend reports to include:
- User acquisition sources
- Referral conversion rates
- Growth over time
- Partner pipeline status

READ-ONLY metrics.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AUDIT & SAFETY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ No wallet or payout changes
â€¢ No pricing changes
â€¢ All growth actions logged
â€¢ Clear separation from financial logic

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FINAL CHECKS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ Existing features unaffected
â€¢ Analytics accurate
â€¢ No performance regression
â€¢ App compiles cleanly

IMPLEMENT PHASE 19 ONLY.
